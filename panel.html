<!DOCTYPE html>
<html lang="en">

<div id="regexlab-container">
  <div id="regexlab-panel">

    <!-- Close button: move here -->
    <button id="regexlab-close" title="Close">Ã—</button>
    <!-- === TAB HEADER === -->
    <div class="regexlab-tabs">
      <button class="regexlab-tab active" data-tab="editor">Editor</button>
      <button class="regexlab-tab" data-tab="library">Library</button>
      <button class="regexlab-tab" data-tab="output">Output</button>
      <button class="regexlab-tab" data-tab="settings">Settings</button>
      <button class="regexlab-tab" data-tab="help">Help</button>
    </div>
    <!-- === TAB CONTENTS === -->
    <div class="regexlab-tab-content active" id="tab-editor">
      <h2>RegexLab Browser Extension</h2>

      <div id="regexlab-source-selector" style="margin-bottom: 8px;">
        <label><input type="radio" name="pattern-source" value="default" checked /> Default</label>
        <label style="margin-left: 10px;"><input type="radio" name="pattern-source" value="custom" /> Custom</label>
      </div>

      <label for="regexlab-defaults">ğŸ¯ Patterns:</label>
      <select id="regexlab-defaults">
        <option value="">-- Select a pattern --</option>
      </select>

      <label for="regexlab-defaults">ğŸ” Or write your own regex pattern:</label>
      <input id="regexlab-input" type="text" placeholder="Write your regex..." />

      <div>
        <button id="regexlab-highlight">Highlight Matches</button>
        <button id="regexlab-save-pattern">ğŸ’¾ Save Pattern</button>
      </div>

      <div id="regexlab-results">Ready.</div>
    </div>

    <!-- Tab: Library -->
    <div class="regexlab-tab-content" id="tab-library">
      <div style="display: flex; gap: 20px;">
        <!-- Left side: Form -->
        <div style="flex: 1;">
          <input id="pattern-title" type="text" placeholder="Pattern Title" />
          <input id="pattern-desc" type="text" placeholder="Short Description" />
          <input id="pattern-tags" type="text" placeholder="Comma-separated Tags" />
          <input id="pattern-value" type="text" placeholder="Regex Pattern" />
          <div style="margin-top: 8px;">
            <button id="pattern-save">ğŸ’¾ Save</button>
            <button id="pattern-update">ğŸ” Update</button>
            <button id="pattern-delete">ğŸ—‘ Delete</button>
          </div>
        </div>

        <!-- Right side: List -->
        <div style="flex: 1;">
          <h4 style="margin-bottom: 6px;">ğŸ“š Saved Patterns</h4>
          <ul id="pattern-list"
            style="padding-left: 0; list-style: none; border: 1px solid #333; max-height: 250px; overflow-y: auto; background: #252526;">
            <!-- <li>Pattern Title</li> -->
          </ul>
        </div>
      </div>

    </div>

    <!-- Tab: Output -->
    <div class="regexlab-tab-content" id="tab-output">

      <!-- ğŸ”¼ Export Dropdown Ãœste AlÄ±ndÄ± -->
      <details id="regexlab-export-dropdown" style="margin-bottom: 10px;">
        <summary style="cursor: pointer;">ğŸ“¦ Export</summary>
        <div style="margin-top: 6px;">
          <button id="regexlab-copy">ğŸ“‹ Copy</button>
          <button id="regexlab-export-txt">â¬‡ TXT</button>
          <button id="regexlab-export-json">â¬‡ JSON</button>
        </div>
      </details>

      <!-- âœ… Output verileri -->
      <div id="regexlab-results">Ready.</div>
      <div id="regexlab-match-list" style="display: none;"></div>
    </div>



    <!-- Tab: Settings -->
    <div class="regexlab-tab-content" id="tab-settings">
      <!-- SETTINGS PANEL START -->
      <div class="regexlab-settings-section">

        <!-- Match Options -->
        <h3>ğŸ”§ Match Options</h3>
        <label><input type="checkbox" id="setting-case" /> Case Sensitive Match</label><br>
        <label><input type="checkbox" id="setting-global" checked /> Global Match (g flag)</label><br>
        <label><input type="checkbox" id="setting-multiline" /> Multiline (m flag)</label>

      </div>

      <hr style="margin: 12px 0; border-color: #444;" />

      <div class="regexlab-settings-section">

        <!-- Highlight Style -->
        <h3>ğŸ¨ Highlight Style</h3>
        <label for="setting-highlight-color">Highlight Color:</label>
        <input type="color" id="setting-highlight-color" value="#264f78" /><br><br>

        <label><input type="checkbox" id="setting-bold" checked /> Bold</label><br>
        <label><input type="checkbox" id="setting-italic" /> Italic</label>

      </div>

      <hr style="margin: 12px 0; border-color: #444;" />

      <div class="regexlab-settings-section">

        <!-- Storage -->
        <h3>ğŸ“¦ Data & Storage</h3>
        <button id="setting-clear-storage">ğŸ§¹ Clear All Saved Patterns</button>
        <button id="setting-export-storage">â¬‡ Export Patterns</button>

      </div>

      <!-- SETTINGS PANEL END -->
    </div>

    <!-- HELP & INFO -->

    <div class="regexlab-tab-content" id="tab-help">
      <h3>ğŸ†˜ Help & Info</h3>

      <p><b>What is RegexLab?</b></p>
      <p>RegexLab is a browser-based tool for writing, testing, and debugging regular expressions directly on any
        webpage.</p>

      <p><b>How to use it:</b></p>
      <ul style="margin-left: 16px; color: #bbb; font-size: 13px;">
        <li>ğŸ§ª Write a regex pattern in the input field under the Editor tab.</li>
        <li>ğŸ¯ Choose from Default or Custom patterns via the selector.</li>
        <li>ğŸ’¡ Click <b>RUN</b> to highlight matches on the current page.</li>
        <li>ğŸ“‹ Use the Output tab to export or copy the results.</li>
        <li>ğŸ“š Manage and save your custom patterns in the Library tab.</li>
        <li>âš™ï¸ Customize your experience in the Settings tab.</li>
      </ul>

      <p><b>Version:</b> RegexLab v1.0.0 BETA â€“ April 2025</p>
      <p><b>Developer:</b> <a href="https://github.com/Zulwatha" target="_blank">@github</a></p>
    </div>

    <div id="regexlab-footer">
      RegexLab v1.0 by <a href="https://github.com/Zulwatha" target="_blank">@github</a>
    </div>


    <!-- Script must be at the end -->
    <script src="panel.js"></script>
  </div>

</html>
<script>
  const closeButton = document.getElementById('regexlab-close');
  const inputField = document.getElementById('regexlab-input');
  const highlightButton = document.getElementById('regexlab-highlight');
  const resultsDiv = document.getElementById('regexlab-results');

  closeButton.addEventListener('click', () => {
    window.close();
  });

  highlightButton.addEventListener('click', () => {
    const regexPattern = inputField.value;
    if (regexPattern) {
      chrome.runtime.sendMessage({ action: 'highlightMatches', pattern: regexPattern });
    } else {
      resultsDiv.textContent = 'Please enter a valid regex pattern.';
    }
  });